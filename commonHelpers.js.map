{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43838996-7b0b384f174ce1ebbbcd3455e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function searchPhotos(query, page) {\n  try {\n    const response = await axios.get('', {\n      params: {\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        key: API_KEY,\n        per_page: 15,\n        page,\n      },\n    });\n\n    return response;\n  } catch (error) {\n    console.error('Error fetching data from Pixabay API:', error);\n    throw error;\n  }\n}\n","export function createGallery(images) {\n  return images\n    .map(\n      ({ tags, likes, views, comments, downloads, largeImageURL }) =>\n        `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${largeImageURL}\" alt=\"${tags}\">\n            <div class=\"info-gallery-box\">\n              <ul class=\"info-gallery-list\">\n                <li class=\"info-gallery-item\">\n                  <p class=\"info-gallery-text\">Likes</p>\n                  <span class=\"info-gallery-span\">${likes}</span>\n                </li>\n                <li class=\"info-gallery-item\">\n                  <p class=\"info-gallery-text\">Views</p>\n                  <span class=\"info-gallery-span\">${views}</span>\n                </li>\n                <li class=\"info-gallery-item\">\n                  <p class=\"info-gallery-text\">Comments</p>\n                  <span class=\"info-gallery-span\">${comments}</span>\n                </li>\n                <li class=\"info-gallery-item\">\n                  <p class=\"info-gallery-text\">Downloads</p>\n                  <span class=\"info-gallery-span\">${downloads}</span>\n                </li>\n              </ul>\n            </div>\n          </a>\n        </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchPhotos } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst galleryList = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet searchQuery = '';\nlet totalHits = 0;\n\nformEl.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n\n  searchQuery = event.currentTarget.elements.search.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.error({\n      message: 'Search query cannot be empty. Please try again!',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      timeout: 4000,\n    });\n    return;\n  }\n\n  page = 1;\n  loaderEl.classList.remove('is-hidden');\n  loadMoreBtn.classList.add('is-hidden');\n  galleryList.innerHTML = '';\n\n  try {\n    const { data } = await searchPhotos(searchQuery, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        timeout: 4000,\n      });\n      loaderEl.classList.add('is-hidden');\n      return;\n    }\n\n    galleryList.innerHTML = createGallery(data.hits);\n    lightbox.refresh();\n\n    if (data.hits.length < 15 || totalHits <= 15) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fff',\n        backgroundColor: '#9fc5e8',\n        position: 'topRight',\n        timeout: 4000,\n      });\n    } else {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      timeout: 4000,\n    });\n  } finally {\n    loaderEl.classList.add('is-hidden');\n    event.target.reset();\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    const { data } = await searchPhotos(searchQuery, page);\n    galleryList.insertAdjacentHTML('beforeend', createGallery(data.hits));\n    lightbox.refresh();\n\n    const cardHeight =\n      galleryList.firstElementChild.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (data.hits.length < 15 || page * 15 >= totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fff',\n        backgroundColor: '#9fc5e8',\n        position: 'topRight',\n        timeout: 4000,\n      });\n      loadMoreBtn.classList.add('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n      timeout: 4000,\n    });\n  } finally {\n    loaderEl.classList.add('is-hidden');\n  }\n}\n"],"names":["API_KEY","BASE_URL","axios","searchPhotos","query","page","error","createGallery","images","tags","likes","views","comments","downloads","largeImageURL","formEl","galleryList","loaderEl","loadMoreBtn","lightbox","SimpleLightbox","searchQuery","totalHits","onSubmit","onLoadMore","event","iziToast","data","cardHeight"],"mappings":"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"}